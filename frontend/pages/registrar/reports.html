<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports & Analytics - MSEFC</title>
    <link rel="stylesheet" href="/css/shared/sidebar-styles.css">
    <link rel="stylesheet" href="/css/registrar/report-styles.css">
    <link rel="stylesheet" href="/css/shared/page-transitions.css">


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="dashboard">
        <!-- Sidebar injected by sidebar-injector.js -->

        <main class="main-content">
            <div class="page-header">
                <h1 style="font-size: 2rem; color: #1f2937;">Reports & Analytics</h1>
                <p style="color: #6b7280;">View enrollment statistics and generate reports</p>
            </div>

            <!-- Tabs -->
            <div class="tabs">
                <div class="tab active" onclick="switchTab('charts')">ðŸ“Š Charts & Statistics</div>
                <div class="tab" onclick="switchTab('generator')">ðŸ“„ Report Generator</div>
                <div class="tab" onclick="switchTab('history')">ðŸ“‹ Report History</div>
            </div>

            <!-- Charts Tab -->
            <div id="charts-tab" class="tab-content">
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                    <div class="chart-container">
                        <div class="chart-title">Students by Type</div>
                        <div class="chart-wrapper">
                            <canvas id="typeChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Students by School Level</div>
                        <div class="chart-wrapper">
                            <canvas id="levelChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Students by Grade Level</div>
                        <div class="chart-wrapper">
                            <canvas id="gradeChart"></canvas>
                        </div>
                    </div>

                    <div class="chart-container">
                        <div class="chart-title">Students by Status</div>
                        <div class="chart-wrapper">
                            <canvas id="statusChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Generator Tab -->
            <div id="generator-tab" class="tab-content hidden">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 2rem;">
                    <!-- Daily Report -->
                    <div class="report-generator">
                        <div class="report-title">Daily Report</div>
                        <form onsubmit="generateDailyReport(event)">
                            <div class="form-group">
                                <label>Select Date</label>
                                <input type="date" id="dailyDate" required>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Generate Report</button>
                        </form>
                        <div id="dailyResult" class="hidden" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Monthly Report -->
                    <div class="report-generator">
                        <div class="report-title">Monthly Report</div>
                        <form onsubmit="generateMonthlyReport(event)">
                            <div class="form-group">
                                <label>Month</label>
                                <select id="monthSelect" required>
                                    <option value="">Select Month</option>
                                    <option value="1">January</option>
                                    <option value="2">February</option>
                                    <option value="3">March</option>
                                    <option value="4">April</option>
                                    <option value="5">May</option>
                                    <option value="6">June</option>
                                    <option value="7">July</option>
                                    <option value="8">August</option>
                                    <option value="9">September</option>
                                    <option value="10">October</option>
                                    <option value="11">November</option>
                                    <option value="12">December</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Year</label>
                                <input type="number" id="monthYear" value="2025" min="2020" required>
                            </div>
                            <button type="submit" class="btn btn-primary" style="width: 100%;">Generate Report</button>
                        </form>
                        <div id="monthlyResult" class="hidden" style="margin-top: 1rem;"></div>
                    </div>

                    <!-- Yearly Report -->
                    <div class="report-generator">
                        <div class="report-title">Yearly Report</div>
                        <form onsubmit="generateYearlyReport(event)">
                            <div class="form-group">
                                <label>School Year</label>
                                <input type="text" id="schoolYear" value="2025-2026" placeholder="e.g., 2025-2026"
                                    required>
                            </div>
                            <button type="submit" class="btn btn-primary"
                                style="width: 100%; margin-top: 2.5rem;">Generate Report</button>
                        </form>
                        <div id="yearlyResult" class="hidden" style="margin-top: 1rem;"></div>
                    </div>
                </div>
            </div>

            <!-- History Tab -->
            <div id="history-tab" class="tab-content hidden">
                <div class="report-generator">
                    <div class="report-title">Report History</div>
                    <div style="margin-bottom: 1.5rem;">
                        <label>Filter by Type:</label>
                        <select id="reportTypeFilter" onchange="loadReportHistory()"
                            style="padding: 0.5rem; margin-left: 1rem;">
                            <option value="">All Reports</option>
                            <option value="daily">Daily</option>
                            <option value="monthly">Monthly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                    </div>
                    <table class="report-table">
                        <thead>
                            <tr>
                                <th>Report Type</th>
                                <th>Date</th>
                                <th>Total Enrollments</th>
                                <th>New Students</th>
                                <th>Returning</th>
                                <th>Transferees</th>
                                <th>JHS</th>
                                <th>SHS</th>
                            </tr>
                        </thead>
                        <tbody id="reportTableBody">
                            <tr>
                                <td colspan="8" style="text-align: center; padding: 2rem;">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script src="/js/shared/sidebar-injector.js"></script>
    <script src="/js/registrar/report.js"></script>

</body>

</html>